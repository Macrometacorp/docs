"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3886],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>m});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),s=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):u(u({},t),e)),r},p=function(e){var t=s(e.components);return n.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=s(r),m=a,y=d["".concat(l,".").concat(m)]||d[m]||c[m]||i;return r?n.createElement(y,u(u({ref:t},p),{},{components:r})):n.createElement(y,u({ref:t},p))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,u=new Array(i);u[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:a,u[1]=o;for(var s=2;s<i;s++)u[s]=r[s];return n.createElement.apply(null,u)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},87786:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>u,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>s});var n=r(87462),a=(r(67294),r(3905));const i={sidebar_position:20,title:"Running Queries"},u=void 0,o={unversionedId:"queryworkers/running-queries",id:"queryworkers/running-queries",title:"Running Queries",description:"After you build a query, you might want to run it. You might run a query to perform an action on your data (such as INSERT or DELETE), or you might test a query that you intend to save as a query worker.",source:"@site/docs/queryworkers/running-queries.md",sourceDirName:"queryworkers",slug:"/queryworkers/running-queries",permalink:"/docs/queryworkers/running-queries",draft:!1,editUrl:"https://github.com/macrometacorp/docs/edit/main/docs/queryworkers/running-queries.md",tags:[],version:"current",sidebarPosition:20,frontMatter:{sidebar_position:20,title:"Running Queries"},sidebar:"defaultSidebar",previous:{title:"Building Queries",permalink:"/docs/queryworkers/building-queries"},next:{title:"Query Workers",permalink:"/docs/queryworkers/query-workers"}},l={},s=[{value:"Run a Query",id:"run-a-query",level:2},{value:"Run a Query in the Console",id:"run-a-query-in-the-console",level:3},{value:"Run a Query with CLI",id:"run-a-query-with-cli",level:3},{value:"API Endpoint",id:"api-endpoint",level:2},{value:"Execution Plan",id:"execution-plan",level:2},{value:"Query Result",id:"query-result",level:2},{value:"Query Profile",id:"query-profile",level:3},{value:"View options",id:"view-options",level:3},{value:"Clear results",id:"clear-results",level:3},{value:"Running Queries tab",id:"running-queries-tab",level:2},{value:"Slow Query History tab",id:"slow-query-history-tab",level:2}],p={toc:s};function c(e){let{components:t,...i}=e;return(0,a.kt)("wrapper",(0,n.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"After you ",(0,a.kt)("a",{parentName:"p",href:"/docs/queryworkers/building-queries"},"build a query"),", you might want to run it. You might run a query to perform an action on your data (such as INSERT or DELETE), or you might test a query that you intend to save as a ",(0,a.kt)("a",{parentName:"p",href:"/docs/queryworkers/query-workers"},"query worker"),"."),(0,a.kt)("h2",{id:"run-a-query"},"Run a Query"),(0,a.kt)("p",null,"You can run a query in the Macrometa console, from the Macrometa CLI, or using an ",(0,a.kt)("a",{parentName:"p",href:"/docs/queryworkers/api-endpoints"},"API endpoint"),"."),(0,a.kt)("h3",{id:"run-a-query-in-the-console"},"Run a Query in the Console"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Log in to your Macrometa account](",(0,a.kt)("a",{parentName:"li",href:"https://auth-play.macrometa.io/"},"https://auth-play.macrometa.io/"),")."),(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("strong",{parentName:"li"},"Compute > Query Workers"),"."),(0,a.kt)("li",{parentName:"ol"},"In the Editor, select ",(0,a.kt)("strong",{parentName:"li"},"C8QL")," or ",(0,a.kt)("strong",{parentName:"li"},"SQL"),", depending on which language you want to write the query in."),(0,a.kt)("li",{parentName:"ol"},"Write a ",(0,a.kt)("a",{parentName:"li",href:"/docs/queryworkers/sql/"},"SQL")," ",(0,a.kt)("a",{parentName:"li",href:"/docs/queryworkers/c8ql/"},"C8QL")," query."),(0,a.kt)("li",{parentName:"ol"},"Enter any required ",(0,a.kt)("a",{parentName:"li",href:"/docs/queryworkers/bind-parameters"},"bind parameter")," values."),(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("strong",{parentName:"li"},"Run Query"),".")),(0,a.kt)("p",null,"Macrometa runs the query and displays the ",(0,a.kt)("a",{parentName:"p",href:"#query-result"},"Query Result")," for that query. Each query you run displays another Query Result unless you navigate away from the page or clear the results."),(0,a.kt)("h3",{id:"run-a-query-with-cli"},"Run a Query with CLI"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Install the CLI as described in ",(0,a.kt)("a",{parentName:"li",href:"../cli/#install-gdnsl-cli"},"Install gdnsl"),"."),(0,a.kt)("li",{parentName:"ol"},"Enter queries using ",(0,a.kt)("inlineCode",{parentName:"li"},"gdnsl query"),". For more information and examples, refer to the CLI ",(0,a.kt)("a",{parentName:"li",href:"/docs/cli/queries-cli"},"Queries")," documentation.")),(0,a.kt)("h2",{id:"api-endpoint"},"API Endpoint"),(0,a.kt)("p",null,"For more information, refer to ",(0,a.kt)("a",{parentName:"p",href:"/docs/queryworkers/api-endpoints"},"API Endpoints"),"."),(0,a.kt)("h2",{id:"execution-plan"},"Execution Plan"),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"Execution Plan is only available with C8QL queries.")),(0,a.kt)("p",null,"After you write a query, click ",(0,a.kt)("strong",{parentName:"p"},"Execution Plan")," to see a detailed breakdown of the query compilation and execution pipeline. Basically, it shows you ",(0,a.kt)("em",{parentName:"p"},"how")," Macrometa performs the query. The details given can be helpful when tuning or debugging complex queries."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Execution Plan",src:r(96414).Z,width:"1070",height:"448"})),(0,a.kt)("h2",{id:"query-result"},"Query Result"),(0,a.kt)("p",null,"Query results vary based on the query. Queries that return information display that information. Queries that do not, perhaps because they are entering or deleting information, just display empty brackets ",(0,a.kt)("inlineCode",{parentName:"p"},"[]"),". The following screenshot shows a query with information returned when running it in the UI."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Query Result",src:r(15902).Z,width:"957",height:"310"})),(0,a.kt)("p",null,"The result of a query is an array of values. The individual values in the result array might have a homogeneous structure, depending on what is actually queried."),(0,a.kt)("p",null,"For example, when returning data from a collection with inhomogeneous documents (the individual documents in the collection have different attribute names) without modification, the result values will as well have an inhomogeneous structure. Each result value itself is a document:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"FOR u IN users\n    RETURN u\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'[ { "id": 1, "name": "John", "active": false }, \n  { "age": 32, "id": 2, "name": "Vanessa" }, \n  { "friends": [ "John", "Vanessa" ], "id": 3, "name": "Amy" } ]\n')),(0,a.kt)("p",null,"However, if a fixed set of attributes from the collection is queried, then the query result values will have a homogeneous structure. Each result value is still a document:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'FOR u IN users\n    RETURN { "id": u.id, "name": u.name }\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'[ { "id": 1, "name": "John" }, \n  { "id": 2, "name": "Vanessa" }, \n  { "id": 3, "name": "Amy" } ]\n')),(0,a.kt)("p",null,"It is also possible to query just scalar values. In this case, the result set is an array of scalars, and each result value is a scalar value:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"FOR u IN users\n    RETURN u.id\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},"[ 1, 2, 3 ]\n")),(0,a.kt)("p",null,"If a query does not produce any results because no matching data can be found, it will produce an empty result array:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},"[]\n")),(0,a.kt)("h3",{id:"query-profile"},"Query Profile"),(0,a.kt)("p",null,"Click ",(0,a.kt)("strong",{parentName:"p"},"Query Info")," to display detailed performance information about the query."),(0,a.kt)("h3",{id:"view-options"},"View options"),(0,a.kt)("p",null,"If your query returned results, then you can display them in ",(0,a.kt)("strong",{parentName:"p"},"Table")," or ",(0,a.kt)("strong",{parentName:"p"},"JSON")," format. Default is ",(0,a.kt)("strong",{parentName:"p"},"Table"),"."),(0,a.kt)("h3",{id:"clear-results"},"Clear results"),(0,a.kt)("p",null,"To clear a specific result, click ",(0,a.kt)("strong",{parentName:"p"},"Clear")," next to the result."),(0,a.kt)("p",null,"To clear all results, click ",(0,a.kt)("strong",{parentName:"p"},"Clear All")," under the Query Editor."),(0,a.kt)("h2",{id:"running-queries-tab"},"Running Queries tab"),(0,a.kt)("p",null,"Click the ",(0,a.kt)("strong",{parentName:"p"},"Running Queries")," tab to see information about any queries currently running, including the bind parameters, runtime, and when the query started."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Running Queries tab",src:r(15452).Z,width:"1003",height:"311"})),(0,a.kt)("h2",{id:"slow-query-history-tab"},"Slow Query History tab"),(0,a.kt)("p",null,"Click the ",(0,a.kt)("strong",{parentName:"p"},"Slow Query History")," tab to see information about any queries currently running, including the bind parameters, runtime, and when the query started."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Slow Query History tab",src:r(29266).Z,width:"996",height:"284"})))}c.isMDXComponent=!0},96414:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/execution-plan-8415c8bb6f3018db67fd05cdf98007e0.png"},15902:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/query-result-12003a36cd116674f4d1db176cc9c5e0.png"},15452:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/running-queries-tab-e97dd8d5f1f171b8163c3d4252aaf0b0.png"},29266:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/slow-query-history-tab-983f97eb850856428890620c905cf7fb.png"}}]);