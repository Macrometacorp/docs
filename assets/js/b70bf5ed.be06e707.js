"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[70077],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),c=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=c(e.components);return i.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},p=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),p=c(n),m=a,f=p["".concat(s,".").concat(m)]||p[m]||u[m]||r;return n?i.createElement(f,l(l({ref:t},d),{},{components:n})):i.createElement(f,l({ref:t},d))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=p;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var c=2;c<r;c++)l[c]=n[c];return i.createElement.apply(null,l)}return i.createElement.apply(null,n)}p.displayName="MDXCreateElement"},78714:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var i=n(87462),a=(n(67294),n(3905));const r={sidebar_position:40,title:"Fulltext Indexes"},l=void 0,o={unversionedId:"collections/indexing/fulltext-indexes",id:"collections/indexing/fulltext-indexes",title:"Fulltext Indexes",description:"A fulltext index can be used to find words, or prefixes of words inside documents.",source:"@site/docs/collections/indexing/fulltext-indexes.md",sourceDirName:"collections/indexing",slug:"/collections/indexing/fulltext-indexes",permalink:"/docs/collections/indexing/fulltext-indexes",draft:!1,editUrl:"https://github.com/macrometacorp/docs/edit/main/docs/collections/indexing/fulltext-indexes.md",tags:[],version:"current",sidebarPosition:40,frontMatter:{sidebar_position:40,title:"Fulltext Indexes"},sidebar:"defaultSidebar",previous:{title:"Working with Indexes",permalink:"/docs/collections/indexing/working-with-indexes"},next:{title:"Geo-Spatial Indexes",permalink:"/docs/collections/indexing/geo-indexes"}},s={},c=[{value:"Accessing Fulltext Indexes",id:"accessing-fulltext-indexes",level:2},{value:"Fulltext C8QL Functions",id:"fulltext-c8ql-functions",level:2},{value:"Create Fulltext Index in GDN Console",id:"create-fulltext-index-in-gdn-console",level:2}],d={toc:c};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,i.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"A fulltext index can be used to find words, or prefixes of words inside documents."),(0,a.kt)("p",null,"A fulltext index can be defined on one attribute only, and will include all words contained in documents that have a textual value in the index attribute."),(0,a.kt)("p",null,"For example, given a fulltext index on the ",(0,a.kt)("inlineCode",{parentName:"p"},"translations")," attribute and the following documents, then searching for ",(0,a.kt)("inlineCode",{parentName:"p"},"\u043b\u0438\u0441\u0430")," using the fulltext index would return only the first document. Searching for the index for the exact string ",(0,a.kt)("inlineCode",{parentName:"p"},"Fox")," would return the first two documents, and searching for ",(0,a.kt)("inlineCode",{parentName:"p"},"prefix:Fox")," would return all three documents:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'{ translations: { en: "fox", de: "Fuchs", fr: "renard", ru: "\u043b\u0438\u0441\u0430" } }\n{ translations: "Fox is the English translation of the German word Fuchs" }\n{ translations: [ "C8DB", "document", "database", "Fox" ] }\n')),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"Deeper nested objects are ignored. For example, a fulltext index on ",(0,a.kt)("em",{parentName:"p"},"translations")," would index ",(0,a.kt)("em",{parentName:"p"},"Fuchs"),", but not ",(0,a.kt)("em",{parentName:"p"},"fox"),", given the following document structure:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'{ translations: { en: { US: "fox" }, de: "Fuchs" }\n')),(0,a.kt)("p",null,"If you need to search across multiple fields and/or nested objects, you may write all the strings into a special attribute, which you then create the index on (it might be necessary to clean the strings first, e.g. remove line breaks and strip certain words)."),(0,a.kt)("p",null,"If the index attribute is neither a string, an object or an array, its contents will not be indexed. When indexing the contents of an array attribute, an array member will only be included in the index if it is a string. When indexing the contents of an object attribute, an object member value will only be included in the index if it is a string. Other data types are ignored and not indexed."),(0,a.kt)("h2",{id:"accessing-fulltext-indexes"},"Accessing Fulltext Indexes"),(0,a.kt)("p",null,"Ensures that a fulltext index exists:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cURL"},'curl -X \'POST\' \'https://api-play.paas.macrometa.io/_fabric/_system/_api/index/fulltext?collection=collectionName\' \\\n -H \'Authorization: bearer <token>\'                                                                            \\\n -d \'{ "fields": [ "type" : "fulltext", ."fields": ["field"],  "minLength": <minLength> }\'\n')),(0,a.kt)("p",null,"Creates a fulltext index on all documents on attribute ",(0,a.kt)("em",{parentName:"p"},"field"),"."),(0,a.kt)("p",null,"Fulltext indexes are implicitly sparse: all documents which do not have the specified ",(0,a.kt)("em",{parentName:"p"},"field")," attribute or that have a non-qualifying value in their ",(0,a.kt)("em",{parentName:"p"},"field")," attribute will be ignored for indexing."),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"Only a single attribute can be indexed. Specifying multiple attributes is unsupported.")),(0,a.kt)("p",null,"The minimum length of words that are indexed can be specified via the ",(0,a.kt)("em",{parentName:"p"},"minLength")," parameter. Words shorter than minLength characters will not be indexed. ",(0,a.kt)("em",{parentName:"p"},"minLength")," has a default value of 2. It is thus recommended to explicitly specify this value."),(0,a.kt)("p",null,"In case that the index was successfully created, an object with the index details is returned."),(0,a.kt)("h2",{id:"fulltext-c8ql-functions"},"Fulltext C8QL Functions"),(0,a.kt)("p",null,"Fulltext C8QL functions are detailed in ",(0,a.kt)("a",{parentName:"p",href:"/docs/queryworkers/c8ql/functions/fulltext"},"Fulltext functions"),"."),(0,a.kt)("h2",{id:"create-fulltext-index-in-gdn-console"},"Create Fulltext Index in GDN Console"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://auth-play.macrometa.io/"},"Log in to your Macrometa account"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Click ",(0,a.kt)("strong",{parentName:"p"},"Data > Collections"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Click the collection that you want to create an index for.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Click ",(0,a.kt)("strong",{parentName:"p"},"Indexes"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"In ",(0,a.kt)("strong",{parentName:"p"},"Type"),", select ",(0,a.kt)("strong",{parentName:"p"},"Fulltext Index"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Enter the following information:"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Fields -")," Single attribute path."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Name -")," The name of the index. If left blank, then Macrometa autogenerates the name."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Min. length -")," The minimum character of words in the index."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Create in Background -")," If true, will create an index in the background rather than lock the collection while the index is created. This allows for basic CRUD operations to occur while the index is created. For more information, refer to ",(0,a.kt)("a",{parentName:"li",href:"/docs/collections/indexing/create-index-in-background"},"Create Index in Background"),"."))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Click ",(0,a.kt)("strong",{parentName:"p"},"Create"),"."))))}u.isMDXComponent=!0}}]);