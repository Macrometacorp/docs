"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2914],{3905:(e,r,t)=>{t.d(r,{Zo:()=>k,kt:()=>y});var a=t(67294);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?n(Object(t),!0).forEach((function(r){o(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function l(e,r){if(null==e)return{};var t,a,o=function(e,r){if(null==e)return{};var t,a,o={},n=Object.keys(e);for(a=0;a<n.length;a++)t=n[a],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)t=n[a],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var u=a.createContext({}),s=function(e){var r=a.useContext(u),t=r;return e&&(t="function"==typeof e?e(r):i(i({},r),e)),t},k=function(e){var r=s(e.components);return a.createElement(u.Provider,{value:r},e.children)},p={inlineCode:"code",wrapper:function(e){var r=e.children;return a.createElement(a.Fragment,{},r)}},c=a.forwardRef((function(e,r){var t=e.components,o=e.mdxType,n=e.originalType,u=e.parentName,k=l(e,["components","mdxType","originalType","parentName"]),c=s(t),y=o,m=c["".concat(u,".").concat(y)]||c[y]||p[y]||n;return t?a.createElement(m,i(i({ref:r},k),{},{components:t})):a.createElement(m,i({ref:r},k))}));function y(e,r){var t=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var n=t.length,i=new Array(n);i[0]=c;var l={};for(var u in r)hasOwnProperty.call(r,u)&&(l[u]=r[u]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var s=2;s<n;s++)i[s]=t[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},8345:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>u,contentTitle:()=>i,default:()=>p,frontMatter:()=>n,metadata:()=>l,toc:()=>s});var a=t(87462),o=(t(67294),t(3905));const n={sidebar_position:30,title:"Query Workers"},i=void 0,l={unversionedId:"queryworkers/query-workers",id:"queryworkers/query-workers",title:"Query Workers",description:"After you build a query, you can save it as a query worker, similar to a SQL stored procedures. Query workers are cached across all GeoFabric locations. You can edit query workers while they are running, but an unsaved query must be redeployed if you need to update it.",source:"@site/docs/queryworkers/query-workers.md",sourceDirName:"queryworkers",slug:"/queryworkers/query-workers",permalink:"/docs/queryworkers/query-workers",draft:!1,editUrl:"https://github.com/macrometacorp/docs/edit/main/docs/queryworkers/query-workers.md",tags:[],version:"current",sidebarPosition:30,frontMatter:{sidebar_position:30,title:"Query Workers"},sidebar:"defaultSidebar",previous:{title:"Running Queries",permalink:"/docs/queryworkers/running-queries"},next:{title:"API Endpoints",permalink:"/docs/queryworkers/api-endpoints"}},u={},s=[{value:"Create a New Query Worker",id:"create-a-new-query-worker",level:2},{value:"View Query Workers",id:"view-query-workers",level:2},{value:"Copy a Query Worker",id:"copy-a-query-worker",level:3},{value:"Explain a Query Worker",id:"explain-a-query-worker",level:3},{value:"Run a Query Worker",id:"run-a-query-worker",level:3},{value:"Delete a Query Worker",id:"delete-a-query-worker",level:3},{value:"Edit a Query Worker",id:"edit-a-query-worker",level:2},{value:"Import Query Workers",id:"import-query-workers",level:2},{value:"Export Query Workers",id:"export-query-workers",level:2}],k={toc:s};function p(e){let{components:r,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},k,n,{components:r,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"After you build a query, you can save it as a ",(0,o.kt)("em",{parentName:"p"},"query worker"),", similar to a SQL stored procedures. Query workers are cached across all GeoFabric locations. You can edit query workers while they are running, but an unsaved query must be redeployed if you need to update it."),(0,o.kt)("p",null,"You can create and update query workers from the Macrometa web console, command line, or REST API. Each query worker is tied to a specific query text and parameter set. You can set optional or mandatory default values for query parameters."),(0,o.kt)("p",null,"Each query worker functions as an endpoint. Query workers exist on the GeoFabric level along with other data like collections and documents."),(0,o.kt)("h2",{id:"create-a-new-query-worker"},"Create a New Query Worker"),(0,o.kt)("p",null,"When you save a query, it becomes a query worker."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Log in to your Macrometa account](",(0,o.kt)("a",{parentName:"li",href:"https://auth-play.macrometa.io/"},"https://auth-play.macrometa.io/"),")."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Compute > Query Workers"),"."),(0,o.kt)("li",{parentName:"ol"},"In the Editor, select ",(0,o.kt)("strong",{parentName:"li"},"C8QL")," or ",(0,o.kt)("strong",{parentName:"li"},"SQL"),", depending on which language you want to write the query worker in."),(0,o.kt)("li",{parentName:"ol"},"Write a ",(0,o.kt)("a",{parentName:"li",href:"/docs/queryworkers/sql/"},"SQL")," ",(0,o.kt)("a",{parentName:"li",href:"/docs/queryworkers/c8ql/"},"C8QL")," query."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Save Query"),"."),(0,o.kt)("li",{parentName:"ol"},"Enter a ",(0,o.kt)("strong",{parentName:"li"},"Name")," and then click ",(0,o.kt)("strong",{parentName:"li"},"Save"),".")),(0,o.kt)("h2",{id:"view-query-workers"},"View Query Workers"),(0,o.kt)("p",null,"To view query workers, click ",(0,o.kt)("strong",{parentName:"p"},"Compute > Query Workers"),"."),(0,o.kt)("p",null,"Macrometa displays a list of default queries and user-defined queries. You cannot delete or overwrite default queries. In the following screenshot, the user selected a default query:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Query Workers",src:t(26381).Z,width:"997",height:"478"})),(0,o.kt)("h3",{id:"copy-a-query-worker"},"Copy a Query Worker"),(0,o.kt)("p",null,"Click the stacked pages to copy any query worker and edit it in the Query Editor."),(0,o.kt)("h3",{id:"explain-a-query-worker"},"Explain a Query Worker"),(0,o.kt)("p",null,"Click the chat bubbles to display the ",(0,o.kt)("a",{parentName:"p",href:"/docs/queryworkers/running-queries#execution-plan"},"Execution Plan")," of the query worker without running the query."),(0,o.kt)("h3",{id:"run-a-query-worker"},"Run a Query Worker"),(0,o.kt)("p",null,"Click the play icon to run the query."),(0,o.kt)("h3",{id:"delete-a-query-worker"},"Delete a Query Worker"),(0,o.kt)("p",null,"Click the red minus sign to permanently delete the query worker."),(0,o.kt)("h2",{id:"edit-a-query-worker"},"Edit a Query Worker"),(0,o.kt)("p",null,"To edit a query worker:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://auth-play.macrometa.io/"},"Log in to your Macrometa account"),"."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Compute > Query Workers"),"."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Query Workers"),"."),(0,o.kt)("li",{parentName:"ol"},"Double-click the query worker that you want to change. Macrometa opens it in the Editor tab."),(0,o.kt)("li",{parentName:"ol"},"Make any changes to the query and then click ",(0,o.kt)("strong",{parentName:"li"},"Update Query"),".")),(0,o.kt)("h2",{id:"import-query-workers"},"Import Query Workers"),(0,o.kt)("p",null,"To import custom queries from a saved file:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://auth-play.macrometa.io/"},"Log in to your Macrometa account"),"."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Compute > Query Workers"),"."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Query Workers"),"."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Import Queries"),"."),(0,o.kt)("li",{parentName:"ol"},"Select a file and then click ",(0,o.kt)("strong",{parentName:"li"},"Import"),".")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"The file must be a JSON file matching the format on the screen, otherwise Macrometa cannot understand the query.")),(0,o.kt)("h2",{id:"export-query-workers"},"Export Query Workers"),(0,o.kt)("p",null,"To export custom queries and download them as a JSON file:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://auth-play.macrometa.io/"},"Log in to your Macrometa account"),"."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Compute > Query Workers"),"."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Query Workers"),"."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Export Queries"),".")))}p.isMDXComponent=!0},26381:(e,r,t)=>{t.d(r,{Z:()=>a});const a=t.p+"assets/images/saved-queries-565a275d4c288e8b5707a72aa21a2658.png"}}]);