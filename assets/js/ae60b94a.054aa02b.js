"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[87120],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>u});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=i.createContext({}),c=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return i.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),h=c(n),u=a,m=h["".concat(l,".").concat(u)]||h[u]||d[u]||r;return n?i.createElement(m,o(o({ref:t},p),{},{components:n})):i.createElement(m,o({ref:t},p))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var c=2;c<r;c++)o[c]=n[c];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}h.displayName="MDXCreateElement"},71460:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var i=n(87462),a=(n(67294),n(3905));const r={title:"Getting Started with Graphs",sidebar_position:20},o=void 0,s={unversionedId:"graphs/getting-started",id:"graphs/getting-started",title:"Getting Started with Graphs",description:"In this getting started guide you will learn how to work with Graphs by creating relationships between collections that allow you to run semantic queries on airline flight data.",source:"@site/docs/graphs/getting-started.md",sourceDirName:"graphs",slug:"/graphs/getting-started",permalink:"/docs/graphs/getting-started",draft:!1,editUrl:"https://github.com/macrometacorp/docs/edit/main/docs/graphs/getting-started.md",tags:[],version:"current",sidebarPosition:20,frontMatter:{title:"Getting Started with Graphs",sidebar_position:20},sidebar:"defaultSidebar",previous:{title:"Graphs",permalink:"/docs/graphs/"},next:{title:"Using Rest API",permalink:"/docs/graphs/using-rest-api"}},l={},c=[{value:"Dataset",id:"dataset",level:2},{value:"Create a Graph",id:"create-a-graph",level:2},{value:"Query your Graph",id:"query-your-graph",level:2},{value:"Breadth-first search",id:"breadth-first-search",level:3},{value:"Shortest path",id:"shortest-path",level:3},{value:"Get the distance on the shortest path from San Francisco to Paris:",id:"get-the-distance-on-the-shortest-path-from-san-francisco-to-paris",level:3},{value:"Nearest cities",id:"nearest-cities",level:3},{value:"Cities within a given distance",id:"cities-within-a-given-distance",level:3}],p={toc:c};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,i.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"In this getting started guide you will learn how to work with Graphs by creating relationships between collections that allow you to run semantic queries on airline flight data."),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"Graphs")," enable you to group your data and perform more powerful queries across connected documents. A graph consists of ",(0,a.kt)("em",{parentName:"p"},"vertices")," and ",(0,a.kt)("em",{parentName:"p"},"edges"),". Vertices are stored in collections and linked by an edge document. Edges are stored as documents in edge collections, and vertices can be a document or an edge."),(0,a.kt)("p",null,"The ",(0,a.kt)("em",{parentName:"p"},"edge definition")," determines which collections are used in a named graph. A named graph must contain at least one edge definition."),(0,a.kt)("p",null," You can turn documents into graph structures for semantic queries with nodes, edges, and properties. Graphs directly connect data items between different collections. You can use graphs to refer to documents in different tables without a nested join. Graphs can also find patterns of document connections, such as the shortest path between two vertices in a graph."),(0,a.kt)("p",null,"Edges in one edge collection may point to several vertex collections. You can add attributes to edges to do things like labelling connections."),(0,a.kt)("p",null,"Edges have a direction, with their relations ",(0,a.kt)("inlineCode",{parentName:"p"},"_from")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"_to")," pointing from one document to another document stored in vertex collections. In queries you can define in which directions the edge relations may be followed:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"OUTBOUND: ",(0,a.kt)("inlineCode",{parentName:"li"},"_from")," \u2192 ",(0,a.kt)("inlineCode",{parentName:"li"},"_to")),(0,a.kt)("li",{parentName:"ul"},"INBOUND: ",(0,a.kt)("inlineCode",{parentName:"li"},"_from")," \u2190 ",(0,a.kt)("inlineCode",{parentName:"li"},"_to")),(0,a.kt)("li",{parentName:"ul"},"ANY: ",(0,a.kt)("inlineCode",{parentName:"li"},"_from")," \u2194 ",(0,a.kt)("inlineCode",{parentName:"li"},"_to"),".")),(0,a.kt)("h2",{id:"dataset"},"Dataset"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Create a document collection named cities and add data to the collection by executing the following query in the ",(0,a.kt)("inlineCode",{parentName:"li"},"Query Workers")," tab:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-JavaScript"},'LET c = [\n    {"_key": "sanfrancisco", "location": [-122.416667, 37.783333]},\n    {"_key": "newyork", "location": [-74.0059, 40.7127]},\n    {"_key": "detroit", "location": [-83.045833, 42.331389]},\n    {"_key": "paris", "location": [2.3508, 48.8567]},\n    {"_key": "dublin", "location": [-6.260278, 53.349722]},\n    {"_key": "singapore", "location": [103.8, 1.3]},\n    {"_key": "houston", "location": [-95.383056, 29.762778]},\n    {"_key": "seattle", "location": [-122.333056, 47.609722]}\n]\nFOR city IN c\n    INSERT city IN cities\n')),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Add a Geo Index to the cities collection with the fields ",(0,a.kt)("inlineCode",{parentName:"p"},"location")," and Geo JSON set to true.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Create an edge collection named flights. To populate the flights collection, execute the following query:"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-JavaScript"},'LET e = [\n    {"_from": "cities/sanfrancisco", "_to": "cities/singapore", "distance": 13600},\n    {"_from": "cities/sanfrancisco", "_to": "cities/newyork", "distance": 4000},\n    {"_from": "cities/sanfrancisco", "_to": "cities/detroit", "distance": 3300},\n    {"_from": "cities/sanfrancisco", "_to": "cities/houston", "distance": 2600},\n    {"_from": "cities/detroit", "_to": "cities/sanfrancisco", "distance": 3300},\n    {"_from": "cities/detroit", "_to": "cities/newyork", "distance": 800},\n    {"_from": "cities/newyork", "_to": "cities/sanfrancisco", "distance": 4000},\n    {"_from": "cities/newyork", "_to": "cities/detroit", "distance": 800},\n    {"_from": "cities/newyork", "_to": "cities/dublin", "distance": 5100},\n    {"_from": "cities/newyork", "_to": "cities/paris", "distance": 5800},\n    {"_from": "cities/newyork", "_to": "cities/houston", "distance": 2300},\n    {"_from": "cities/dublin", "_to": "cities/newyork", "distance": 5100},\n    {"_from": "cities/dublin", "_to": "cities/paris", "distance": 800},\n    {"_from": "cities/paris", "_to": "cities/newyork", "distance": 5800},\n    {"_from": "cities/paris", "_to": "cities/dublin", "distance": 800},\n    {"_from": "cities/paris", "_to": "cities/singapore", "distance": 10700},\n    {"_from": "cities/singapore", "_to": "cities/sanfrancisco", "distance": 13600},\n    {"_from": "cities/singapore", "_to": "cities/paris", "distance": 10700},\n    {"_from": "cities/houston", "_to": "cities/sanfrancisco", "distance": 2600},\n    {"_from": "cities/houston", "_to": "cities/newyork", "distance": 2300}\n]\nFOR edge IN e\n    INSERT edge IN flights\n')),(0,a.kt)("h2",{id:"create-a-graph"},"Create a Graph"),(0,a.kt)("p",null,"Create a graph named airline with and edges in flights and both from and to vertices in cities."),(0,a.kt)("h2",{id:"query-your-graph"},"Query your Graph"),(0,a.kt)("p",null,"Storing (and retrieving) a graph is one thing, but the actual problems only begin when you want to query information about a graph."),(0,a.kt)("p",null,"Finding the neighbor's of a ",(0,a.kt)("inlineCode",{parentName:"p"},"vertex")," is one crucial question one might have about a graph (or relation, which is the same thing). However, when you deal with graphs (or relations) in practice, you usually have a lot more questions, here are a few that come to mind:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Find all neighbor's of a ",(0,a.kt)("inlineCode",{parentName:"li"},"vertex")," only using ",(0,a.kt)("inlineCode",{parentName:"li"},"edges")," with a given ",(0,a.kt)("inlineCode",{parentName:"li"},"property")," or ",(0,a.kt)("inlineCode",{parentName:"li"},"label"),"."),(0,a.kt)("li",{parentName:"ol"},"Find all neighbor's of a ",(0,a.kt)("inlineCode",{parentName:"li"},"vertex")," with a given ",(0,a.kt)("inlineCode",{parentName:"li"},"property")," or ",(0,a.kt)("inlineCode",{parentName:"li"},"label"),"."),(0,a.kt)("li",{parentName:"ol"},"Find all paths with a fixed length L in the graph starting at some given ",(0,a.kt)("inlineCode",{parentName:"li"},"vertex"),"."),(0,a.kt)("li",{parentName:"ol"},"Find the shortest (or lightest when working with weights) path from vertex ",(0,a.kt)("inlineCode",{parentName:"li"},"V")," to vertex ",(0,a.kt)("inlineCode",{parentName:"li"},"W"),"."),(0,a.kt)("li",{parentName:"ol"},"Find the distances between any two vertices in the graph."),(0,a.kt)("li",{parentName:"ol"},"Perform a depth first search for some vertex starting at a given vertex."),(0,a.kt)("li",{parentName:"ol"},"Perform a breadth first search for some vertex starting at a given vertex."),(0,a.kt)("li",{parentName:"ol"},"Find a minimal spanning tree for the graph."),(0,a.kt)("li",{parentName:"ol"},"Perform any map-reduce like computation as is possible in the Pregel framework by Google, for example \u201cPagerank\u201d or \u201cFind connected components\u201d."),(0,a.kt)("li",{parentName:"ol"},"Solve the traveling salesman problem in the graph.")),(0,a.kt)("p",null,"GDN provides several ",(0,a.kt)("a",{parentName:"p",href:"/docs/graphs/graph-functions"},"Graph Functions")," for working with edges and vertices, to analyze them and their relations."),(0,a.kt)("h3",{id:"breadth-first-search"},"Breadth-first search"),(0,a.kt)("p",null,"Get all cities with a direct flight to New York:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-JavaScript"},'WITH cities\n     FOR city IN INBOUND "cities/newyork" flights\n     RETURN city\n')),(0,a.kt)("h3",{id:"shortest-path"},"Shortest path"),(0,a.kt)("p",null,"Get the shortest path from San Francisco to Paris:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-JavaScript"},'WITH cities\n     LET path = (\n    FOR city IN OUTBOUND SHORTEST_PATH "cities/sanfrancisco" TO "cities/paris"\n        GRAPH "airline"\n        OPTIONS {"weightAttribute": "distance"}\n        RETURN city\n     )\n     RETURN path\n')),(0,a.kt)("h3",{id:"get-the-distance-on-the-shortest-path-from-san-francisco-to-paris"},"Get the distance on the shortest path from San Francisco to Paris:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-JavaScript"},'WITH cities\n     LET path = (\n    FOR city, e IN OUTBOUND SHORTEST_PATH "cities/sanfrancisco" TO "cities/paris"\n        GRAPH "airline"\n        OPTIONS {"weightAttribute": "distance"}\n        RETURN e.distance\n    )\n    RETURN SUM(path)\n')),(0,a.kt)("h3",{id:"nearest-cities"},"Nearest cities"),(0,a.kt)("p",null,"Get the 2 nearest cities to a specified latitude and longitude."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-JavaScript"},'FOR loc IN NEAR(cities, 53.35, -6.26, 2, "distance")\nRETURN {\n    name: loc._key,\n    latitude: loc.location[1],\n    longitude: loc.location[0],\n    distance: loc.distance / 1000\n    }\n')),(0,a.kt)("h3",{id:"cities-within-a-given-distance"},"Cities within a given distance"),(0,a.kt)("p",null,"Get the cities that are no more than 2500km away from Houston."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-JavaScript"},'LET city = DOCUMENT("cities/houston")\nFOR loc IN WITHIN(cities, city.location[1], city.location[0], 2500 * 1000, "distance")\nRETURN {\n    name: loc._key,\n    latitude: loc.location[1],\n    longitude: loc.location[0],\n    distance: loc.distance / 1000\n    }\n')))}d.isMDXComponent=!0}}]);