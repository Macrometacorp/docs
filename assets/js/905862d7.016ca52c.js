"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[17816],{3905:(e,t,r)=>{r.d(t,{Zo:()=>m,kt:()=>d});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var o=a.createContext({}),l=function(e){var t=a.useContext(o),r=t;return e&&(r="function"==typeof e?e(t):p(p({},t),e)),r},m=function(e){var t=l(e.components);return a.createElement(o.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,o=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),c=l(r),d=n,g=c["".concat(o,".").concat(d)]||c[d]||u[d]||i;return r?a.createElement(g,p(p({ref:t},m),{},{components:r})):a.createElement(g,p({ref:t},m))}));function d(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,p=new Array(i);p[0]=c;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:n,p[1]=s;for(var l=2;l<i;l++)p[l]=r[l];return a.createElement.apply(null,p)}return a.createElement.apply(null,r)}c.displayName="MDXCreateElement"},77611:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>o,contentTitle:()=>p,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var a=r(87462),n=(r(67294),r(3905));const i={title:"avro (Source Mapper)"},p=void 0,s={unversionedId:"cep/query-guide/functions/sourcemapper/avro",id:"cep/query-guide/functions/sourcemapper/avro",title:"avro (Source Mapper)",description:"This extension is an Avro to Event input mapper. Transports that accept",source:"@site/docs/cep/query-guide/functions/sourcemapper/avro.md",sourceDirName:"cep/query-guide/functions/sourcemapper",slug:"/cep/query-guide/functions/sourcemapper/avro",permalink:"/docs/cep/query-guide/functions/sourcemapper/avro",draft:!1,editUrl:"https://github.com/macrometacorp/docs/edit/main/docs/cep/query-guide/functions/sourcemapper/avro.md",tags:[],version:"current",frontMatter:{title:"avro (Source Mapper)"},sidebar:"defaultSidebar",previous:{title:"xml (Sink Mapper)",permalink:"/docs/cep/query-guide/functions/sinkmapper/xml"},next:{title:"binary (Source Mapper)",permalink:"/docs/cep/query-guide/functions/sourcemapper/binary"}},o={},l=[{value:"Query Parameters",id:"query-parameters",level:2},{value:"Example 1",id:"example-1",level:2},{value:"Example 2",id:"example-2",level:2},{value:"Example 3",id:"example-3",level:2}],m={toc:l};function u(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,a.Z)({},m,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"This extension is an Avro to Event input mapper. Transports that accept\nAvro messages can utilize this extension to convert the incoming Avro\nmessages to Stream App events.  The Avro schema to be used for creating Avro\nmessages can be specified as a parameter in the stream definition.  If\nno Avro schema is specified, a flat avro schema of the ",(0,n.kt)("inlineCode",{parentName:"p"},"record")," type\nis generated with the stream attributes as schema fields. The\ngenerated/specified Avro schema is used to convert Avro messages to\nStream App events."),(0,n.kt)("p",null,"Syntax"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'CREATE SOURCE <NAME> WITH (map.type="avro", map.schema.def="<STRING>", map.schema.registry="<STRING>", map.schema.id="<STRING>", map.fail.on.missing.attribute="<BOOL>")\n')),(0,n.kt)("h2",{id:"query-parameters"},"Query Parameters"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Name"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"),(0,n.kt)("th",{parentName:"tr",align:null},"Default Value"),(0,n.kt)("th",{parentName:"tr",align:null},"Possible Data Types"),(0,n.kt)("th",{parentName:"tr",align:null},"Optional"),(0,n.kt)("th",{parentName:"tr",align:null},"Dynamic"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"schema.def"),(0,n.kt)("td",{parentName:"tr",align:null},"This specifies the schema of the Avro message. The full schema used to create the Avro message needs to be specified as a quoted JSON string."),(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"STRING"),(0,n.kt)("td",{parentName:"tr",align:null},"No"),(0,n.kt)("td",{parentName:"tr",align:null},"No")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"schema.registry"),(0,n.kt)("td",{parentName:"tr",align:null},"This specifies the URL of the schema registry."),(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"STRING"),(0,n.kt)("td",{parentName:"tr",align:null},"No"),(0,n.kt)("td",{parentName:"tr",align:null},"No")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"schema.id"),(0,n.kt)("td",{parentName:"tr",align:null},"This specifies the ID of the Avro schema. This ID is the global ID that is returned from the schema registry when posting the schema to the registry. The schema is retrieved from the schema registry via the specified ID."),(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"STRING"),(0,n.kt)("td",{parentName:"tr",align:null},"No"),(0,n.kt)("td",{parentName:"tr",align:null},"No")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"fail.on.missing.attribute"),(0,n.kt)("td",{parentName:"tr",align:null},"If this parameter is set to ",(0,n.kt)("inlineCode",{parentName:"td"},"true"),", a JSON execution failing or returning a null value results in that message being dropped by the system. If this parameter is set to ",(0,n.kt)("inlineCode",{parentName:"td"},"false"),", a JSON execution failing or returning a null value results in the system being prompted to send the event with a null value to Stream App so that the user can handle it as required (i.e., by assigning a default value."),(0,n.kt)("td",{parentName:"tr",align:null},"true"),(0,n.kt)("td",{parentName:"tr",align:null},"BOOL"),(0,n.kt)("td",{parentName:"tr",align:null},"Yes"),(0,n.kt)("td",{parentName:"tr",align:null},"No")))),(0,n.kt)("h2",{id:"example-1"},"Example 1"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'CREATE SOURCE UserStream WITH (type=\'stream\', topic=\'user\', map.type=\'avro\', map.schema.def = """{"type":"record","name":"userInfo","namespace":"user.example","fields":[{"name":"name","type":"string"}, {"name":"age","type":"int"}]}""") (name string, age int );\n')),(0,n.kt)("p",null,"The above Stream App query performs a default Avro input mapping. The input\nAvro message that contains user information is converted to a Stream App\nevent. The expected input is a byte array or ByteBuffer."),(0,n.kt)("h2",{id:"example-2"},"Example 2"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'CREATE SOURCE userStream WITH (type=\'stream\', topic=\'user\', map.type=\'avro\', map.schema.def = """{"type":"record","name":"userInfo","namespace":"avro.userInfo","fields":[{"name":"username","type":"string"}, {"name":"age","type":"int"}]}""", map.attributes="name="username",age="age"") (name string, age int );\n')),(0,n.kt)("p",null,"The above Stream App query performs a custom Avro input mapping. The input\nAvro message that contains user information is converted to a Stream App\nevent.  The expected input is a byte array or ByteBuffer."),(0,n.kt)("h2",{id:"example-3"},"Example 3"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"CREATE SOURCE UserStream WITH (type='stream', topic='user', map.type='avro',schema.registry='http://192.168.2.5:9090', schema.id='1', map.attributes=\"name='username', age='age'\") (name string, age int );\n")),(0,n.kt)("p",null,"The above Stream App query performs a custom Avro input mapping. The input\nAvro message that contains user information is converted to a Stream App\nevent via the schema retrieved from the given schema\nregistry(localhost:8081). The expected input is a byte array or\nByteBuffer."))}u.isMDXComponent=!0}}]);