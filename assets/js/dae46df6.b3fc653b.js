"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[48116],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>c});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),u=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),m=u(a),c=r,N=m["".concat(s,".").concat(c)]||m[c]||p[c]||l;return a?n.createElement(N,i(i({ref:t},d),{},{components:a})):n.createElement(N,i({ref:t},d))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var u=2;u<l;u++)i[u]=a[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},84939:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>l,metadata:()=>o,toc:()=>u});var n=a(87462),r=(a(67294),a(3905));const l={title:"rabbitmq (Source)"},i=void 0,o={unversionedId:"cep/source/rabbitmq",id:"cep/source/rabbitmq",title:"rabbitmq (Source)",description:"The rabbitmq source receives the events from the rabbitmq broker via the",source:"@site/docs/cep/source/rabbitmq.md",sourceDirName:"cep/source",slug:"/cep/source/rabbitmq",permalink:"/docs/cep/source/rabbitmq",draft:!1,editUrl:"https://github.com/macrometacorp/docs/edit/main/docs/cep/source/rabbitmq.md",tags:[],version:"current",frontMatter:{title:"rabbitmq (Source)"},sidebar:"defaultSidebar",previous:{title:"prometheus (Source)",permalink:"/docs/cep/source/prometheus"},next:{title:"SSE Source",permalink:"/docs/cep/source/sse"}},s={},u=[{value:"Query Parameters",id:"query-parameters",level:2},{value:"Example 1",id:"example-1",level:2}],d={toc:u};function p(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The rabbitmq source receives the events from the rabbitmq broker via the\nAMQP protocol."),(0,r.kt)("p",null,"Syntax"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'CREATE SOURCE <NAME> WITH (type="rabbitmq", map.type="<STRING>", uri="<STRING>", heartbeat="<INT>", exchange.name="<STRING>", exchange.type="<STRING>", exchange.durable.enabled="<BOOL>", exchange.autodelete.enabled="<BOOL>", routing.key="<STRING>", headers="<STRING>", queue.name="<STRING>", queue.durable.enabled="<BOOL>", queue.exclusive.enabled="<BOOL>", queue.autodelete.enabled="<BOOL>", tls.enabled="<BOOL>", tls.truststore.path="<STRING>", tls.truststore.password="<STRING>", tls.truststore.type="<STRING>", tls.version="<STRING>", auto.ack="<BOOL>")\n')),(0,r.kt)("h2",{id:"query-parameters"},"Query Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default Value"),(0,r.kt)("th",{parentName:"tr",align:null},"Possible Data Types"),(0,r.kt)("th",{parentName:"tr",align:null},"Optional"),(0,r.kt)("th",{parentName:"tr",align:null},"Dynamic"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"uri"),(0,r.kt)("td",{parentName:"tr",align:null},"The URI that is used to connect to an AMQP server. If no URI is specified,an error is logged in the CLI.e.g., ",(0,r.kt)("inlineCode",{parentName:"td"},"amqp://guest:guest"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"amqp://guest:guest@localhost:5672")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"STRING"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"No")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"heartbeat"),(0,r.kt)("td",{parentName:"tr",align:null},"The period of time (in seconds) after which the peer TCP connection should be considered unreachable (down) by RabbitMQ and client libraries."),(0,r.kt)("td",{parentName:"tr",align:null},"60"),(0,r.kt)("td",{parentName:"tr",align:null},"INT"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"No")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"exchange.name"),(0,r.kt)("td",{parentName:"tr",align:null},"The name of the exchange that decides what to do with a message it receives.If the ",(0,r.kt)("inlineCode",{parentName:"td"},"exchange.name")," already exists in the RabbitMQ server, then the system uses that ",(0,r.kt)("inlineCode",{parentName:"td"},"exchange.name")," instead of redeclaring."),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"STRING"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"No")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"exchange.type"),(0,r.kt)("td",{parentName:"tr",align:null},"The type of the exchange name. The exchange types available are ",(0,r.kt)("inlineCode",{parentName:"td"},"direct"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"fanout"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"topic")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"headers"),". For a detailed description of each type, see ","[","RabbitMQ - AMQP Concepts","]","(",(0,r.kt)("a",{parentName:"td",href:"https://www.rabbitmq.com/tutorials/amqp-concepts.html"},"https://www.rabbitmq.com/tutorials/amqp-concepts.html"),")."),(0,r.kt)("td",{parentName:"tr",align:null},"direct"),(0,r.kt)("td",{parentName:"tr",align:null},"STRING"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"No")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"exchange.durable.enabled"),(0,r.kt)("td",{parentName:"tr",align:null},"If this is set to ",(0,r.kt)("inlineCode",{parentName:"td"},"true"),", the exchange remains declared even if the broker restarts."),(0,r.kt)("td",{parentName:"tr",align:null},"false"),(0,r.kt)("td",{parentName:"tr",align:null},"BOOL"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"No")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"exchange.autodelete.enabled"),(0,r.kt)("td",{parentName:"tr",align:null},"If this is set to ",(0,r.kt)("inlineCode",{parentName:"td"},"true"),", the exchange is automatically deleted when it is not used anymore."),(0,r.kt)("td",{parentName:"tr",align:null},"false"),(0,r.kt)("td",{parentName:"tr",align:null},"BOOL"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"No")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"routing.key"),(0,r.kt)("td",{parentName:"tr",align:null},"The key based on which the exchange determines how to route the message to queues. The routing key is like an address for the message. The routing.key must be initialized when the value for the ",(0,r.kt)("inlineCode",{parentName:"td"},"exchange.type")," parameter is ",(0,r.kt)("inlineCode",{parentName:"td"},"direct")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"topic"),"."),(0,r.kt)("td",{parentName:"tr",align:null},"empty"),(0,r.kt)("td",{parentName:"tr",align:null},"STRING"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"No")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"headers"),(0,r.kt)("td",{parentName:"tr",align:null},"The headers of the message. The attributes used for routing are taken from the this paremeter. A message is considered matching if the value of the header equals the value specified upon binding."),(0,r.kt)("td",{parentName:"tr",align:null},"null"),(0,r.kt)("td",{parentName:"tr",align:null},"STRING"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"No")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"queue.name"),(0,r.kt)("td",{parentName:"tr",align:null},"A queue is a buffer that stores messages. If the queue name already exists in the RabbitMQ server, then the system usees that queue name instead of redeclaring it. If no value is specified for this parameter, the system uses the unique queue name that is automatically generated by the RabbitMQ server."),(0,r.kt)("td",{parentName:"tr",align:null},"system generated queue name"),(0,r.kt)("td",{parentName:"tr",align:null},"STRING"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"No")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"queue.durable.enabled"),(0,r.kt)("td",{parentName:"tr",align:null},"If this parameter is set to ",(0,r.kt)("inlineCode",{parentName:"td"},"true"),", the queue remains declared even if the broker restarts"),(0,r.kt)("td",{parentName:"tr",align:null},"false"),(0,r.kt)("td",{parentName:"tr",align:null},"BOOL"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"No")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"queue.exclusive.enabled"),(0,r.kt)("td",{parentName:"tr",align:null},"If this parameter is set to ",(0,r.kt)("inlineCode",{parentName:"td"},"true"),", the queue is exclusive for the current connection. If it is set to ",(0,r.kt)("inlineCode",{parentName:"td"},"false"),", it is also consumable by other connections."),(0,r.kt)("td",{parentName:"tr",align:null},"false"),(0,r.kt)("td",{parentName:"tr",align:null},"BOOL"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"No")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"queue.autodelete.enabled"),(0,r.kt)("td",{parentName:"tr",align:null},"If this parameter is set to ",(0,r.kt)("inlineCode",{parentName:"td"},"true"),", the queue is automatically deleted when it is not used anymore."),(0,r.kt)("td",{parentName:"tr",align:null},"false"),(0,r.kt)("td",{parentName:"tr",align:null},"BOOL"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"No")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"tls.enabled"),(0,r.kt)("td",{parentName:"tr",align:null},"This parameter specifies whether an encrypted communication channel should be established or not. When this parameter is set to ",(0,r.kt)("inlineCode",{parentName:"td"},"true"),", the ",(0,r.kt)("inlineCode",{parentName:"td"},"tls.truststore.path")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"tls.truststore.password")," parameters are initialized."),(0,r.kt)("td",{parentName:"tr",align:null},"false"),(0,r.kt)("td",{parentName:"tr",align:null},"BOOL"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"No")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"tls.truststore.path"),(0,r.kt)("td",{parentName:"tr",align:null},"The file path to the location of the truststore of the client that receives the RabbitMQ events via the ",(0,r.kt)("inlineCode",{parentName:"td"},"AMQP")," protocol. A custom client-truststore can be specified if required. If a custom truststore is not specified, then the system uses the default client-trustore in the ",(0,r.kt)("inlineCode",{parentName:"td"},"${carbon.home}/resources/security")," directory."),(0,r.kt)("td",{parentName:"tr",align:null},"\\${carbon.home}/resources/security/client-truststore.jks"),(0,r.kt)("td",{parentName:"tr",align:null},"STRING"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"No")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"tls.truststore.password"),(0,r.kt)("td",{parentName:"tr",align:null},"The password for the client-truststore. A custom password can be specified if required. If no custom password is specified, then the system uses ",(0,r.kt)("inlineCode",{parentName:"td"},"gdncarbon")," as the default password."),(0,r.kt)("td",{parentName:"tr",align:null},"gdncarbon"),(0,r.kt)("td",{parentName:"tr",align:null},"STRING"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"No")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"tls.truststore.type"),(0,r.kt)("td",{parentName:"tr",align:null},"The type of the truststore."),(0,r.kt)("td",{parentName:"tr",align:null},"JKS"),(0,r.kt)("td",{parentName:"tr",align:null},"STRING"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"No")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"tls.version"),(0,r.kt)("td",{parentName:"tr",align:null},"The version of the tls/ssl."),(0,r.kt)("td",{parentName:"tr",align:null},"SSL"),(0,r.kt)("td",{parentName:"tr",align:null},"STRING"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"No")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"auto.ack"),(0,r.kt)("td",{parentName:"tr",align:null},"If this parameter is set to ",(0,r.kt)("inlineCode",{parentName:"td"},"false"),", the server should expect explicit messages acknowledgements once delivered"),(0,r.kt)("td",{parentName:"tr",align:null},"true"),(0,r.kt)("td",{parentName:"tr",align:null},"BOOL"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"No")))),(0,r.kt)("h2",{id:"example-1"},"Example 1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"@App:name('TestExecutionPlan')\nCREATE STREAM FooStream (symbol string, price float, volume long);\n\n@info(name = 'query1')\nCREATE SOURCE BarStream WITH (type ='rabbitmq', uri = 'amqp://guest:guest@localhost:5672', exchange.name = 'direct', routing.key= 'direct', map.type='xml') (symbol string, price float, volume long);\n\ninsert into BarStream\nfrom FooStream select symbol, price, volume ;\n")),(0,r.kt)("p",null,"This query receives events from the ",(0,r.kt)("inlineCode",{parentName:"p"},"direct")," exchange with the\n",(0,r.kt)("inlineCode",{parentName:"p"},"direct"),"exchange type, and the ",(0,r.kt)("inlineCode",{parentName:"p"},"directTest")," routing key."))}p.isMDXComponent=!0}}]);