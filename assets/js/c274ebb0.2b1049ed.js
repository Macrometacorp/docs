"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6078],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>d});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=a.createContext({}),s=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):p(p({},t),e)),r},u=function(e){var t=s(e.components);return a.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),m=s(r),d=n,y=m["".concat(l,".").concat(d)]||m[d]||c[d]||o;return r?a.createElement(y,p(p({ref:t},u),{},{components:r})):a.createElement(y,p({ref:t},u))}));function d(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,p=new Array(o);p[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:n,p[1]=i;for(var s=2;s<o;s++)p[s]=r[s];return a.createElement.apply(null,p)}return a.createElement.apply(null,r)}m.displayName="MDXCreateElement"},10994:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>p,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>s});var a=r(87462),n=(r(67294),r(3905));const o={title:"keyvalue (Source Mapper)"},p=void 0,i={unversionedId:"cep/query-guide/functions/sourcemapper/keyvalue",id:"cep/query-guide/functions/sourcemapper/keyvalue",title:"keyvalue (Source Mapper)",description:"Key-Value Map to Event input mapper extension allows transports that accept events as key value maps to convert those events to stream worker events. You can either receive predefined keys where conversion takes place without extra configurations, or use custom keys to map from the message.",source:"@site/docs/cep/query-guide/functions/sourcemapper/keyvalue.md",sourceDirName:"cep/query-guide/functions/sourcemapper",slug:"/cep/query-guide/functions/sourcemapper/keyvalue",permalink:"/docs/cep/query-guide/functions/sourcemapper/keyvalue",draft:!1,editUrl:"https://github.com/macrometacorp/docs/edit/main/docs/cep/query-guide/functions/sourcemapper/keyvalue.md",tags:[],version:"current",frontMatter:{title:"keyvalue (Source Mapper)"},sidebar:"defaultSidebar",previous:{title:"json (Source Mapper)",permalink:"/docs/cep/query-guide/functions/sourcemapper/json"},next:{title:"passThrough (Source Mapper)",permalink:"/docs/cep/query-guide/functions/sourcemapper/passThrough"}},l={},s=[{value:"Syntax",id:"syntax",level:2},{value:"Query Parameters",id:"query-parameters",level:2},{value:"Example 1",id:"example-1",level:2},{value:"Example 2",id:"example-2",level:2}],u={toc:s};function c(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,a.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"Key-Value Map to Event")," input mapper extension allows transports that accept events as key value maps to convert those events to stream worker events. You can either receive predefined keys where conversion takes place without extra configurations, or use custom keys to map from the message."),(0,n.kt)("h2",{id:"syntax"},"Syntax"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'CREATE SOURCE <NAME> WITH (map.type="keyvalue", map.fail.on.missing.attribute="<BOOL>")\n')),(0,n.kt)("h2",{id:"query-parameters"},"Query Parameters"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Name"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"),(0,n.kt)("th",{parentName:"tr",align:null},"Default Value"),(0,n.kt)("th",{parentName:"tr",align:null},"Possible Data Types"),(0,n.kt)("th",{parentName:"tr",align:null},"Optional"),(0,n.kt)("th",{parentName:"tr",align:null},"Dynamic"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"fail.on.missing.attribute"),(0,n.kt)("td",{parentName:"tr",align:null},"If this parameter is set to ",(0,n.kt)("inlineCode",{parentName:"td"},"true"),", if an event arrives without a matching key for a specific attribute in the connected stream, it is dropped and not processed by the stream processor. If this parameter is set to ",(0,n.kt)("inlineCode",{parentName:"td"},"false")," the stream processor adds the required key to such events with a null value, and the event is converted to a stream worker event so that you could handle them as required before they are further processed."),(0,n.kt)("td",{parentName:"tr",align:null},"true"),(0,n.kt)("td",{parentName:"tr",align:null},"BOOL"),(0,n.kt)("td",{parentName:"tr",align:null},"Yes"),(0,n.kt)("td",{parentName:"tr",align:null},"No")))),(0,n.kt)("h2",{id:"example-1"},"Example 1"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"CREATE SOURCE FooStream WITH (type='stream', topic='stock', map.type='keyvalue') (symbol string, price float, volume long);\n")),(0,n.kt)("p",null,"This query performs a default key value input mapping. The expected input is a map similar to the following: symbol: ",(0,n.kt)("inlineCode",{parentName:"p"},"gdn")," price: 55.6f volume: 100"),(0,n.kt)("h2",{id:"example-2"},"Example 2"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"CREATE SOURCE FooStream WITH (type='stream', topic='stock', map.type='keyvalue', map.fail.on.missing.attribute='true', map.attributes=\"symbol = 's', price = 'p', volume = 'v'\") (symbol string, price float, volume long);\n")),(0,n.kt)("p",null,"This query performs a custom key value input mapping. The matching keys\nfor the ",(0,n.kt)("inlineCode",{parentName:"p"},"symbol"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"price")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"volume")," attributes are be ",(0,n.kt)("inlineCode",{parentName:"p"},"s"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"p"),", and\n",(0,n.kt)("inlineCode",{parentName:"p"},"v")," respectively. The expected input is a map similar to the following:\ns: ",(0,n.kt)("inlineCode",{parentName:"p"},"gdn")," p: 55.6 v: 100"))}c.isMDXComponent=!0}}]);