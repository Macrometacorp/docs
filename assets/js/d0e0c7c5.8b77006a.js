"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[28841],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>d});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=r.createContext({}),u=function(e){var t=r.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},m=function(e){var t=u(e.components);return r.createElement(i.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),p=u(n),d=a,h=p["".concat(i,".").concat(d)]||p[d]||c[d]||o;return n?r.createElement(h,s(s({ref:t},m),{},{components:n})):r.createElement(h,s({ref:t},m))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,s=new Array(o);s[0]=p;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:a,s[1]=l;for(var u=2;u<o;u++)s[u]=n[u];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},44432:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>u});var r=n(87462),a=(n(67294),n(3905));const o={sidebar_position:30,title:"Part 3 - Sort and Limit"},s=void 0,l={unversionedId:"queryworkers/c8ql/got-tutorial/sort-and-limit",id:"queryworkers/c8ql/got-tutorial/sort-and-limit",title:"Part 3 - Sort and Limit",description:"This section explains how to sort and limit your query results.",source:"@site/docs/queryworkers/c8ql/got-tutorial/sort-and-limit.md",sourceDirName:"queryworkers/c8ql/got-tutorial",slug:"/queryworkers/c8ql/got-tutorial/sort-and-limit",permalink:"/docs/queryworkers/c8ql/got-tutorial/sort-and-limit",draft:!1,editUrl:"https://github.com/macrometacorp/docs/edit/main/docs/queryworkers/c8ql/got-tutorial/sort-and-limit.md",tags:[],version:"current",sidebarPosition:30,frontMatter:{sidebar_position:30,title:"Part 3 - Sort and Limit"},sidebar:"defaultSidebar",previous:{title:"Part 2 - Filter Results",permalink:"/docs/queryworkers/c8ql/got-tutorial/filter-results"},next:{title:"Part 4 - Import Traits and Merge",permalink:"/docs/queryworkers/c8ql/got-tutorial/import-and-merge"}},i={},u=[{value:"Limit the Result Count",id:"limit-the-result-count",level:2},{value:"Sort by Name",id:"sort-by-name",level:2},{value:"Sort by Multiple Attributes",id:"sort-by-multiple-attributes",level:2},{value:"Sort by Age",id:"sort-by-age",level:2},{value:"Next Steps",id:"next-steps",level:2}],m={toc:u};function c(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"This section explains how to sort and limit your query results."),(0,a.kt)("h2",{id:"limit-the-result-count"},"Limit the Result Count"),(0,a.kt)("p",null,"It might not always be necessary to return all documents that a ",(0,a.kt)("inlineCode",{parentName:"p"},"FOR")," loop would normally return. In those cases, you can limit the amount of documents with a ",(0,a.kt)("inlineCode",{parentName:"p"},"LIMIT()")," operation. For more information, refer to ",(0,a.kt)("a",{parentName:"p",href:"/docs/queryworkers/c8ql/operations/limit"},"LIMIT()")," operation documentation."),(0,a.kt)("p",null,"In the example below, ",(0,a.kt)("inlineCode",{parentName:"p"},"LIMIT")," is followed by a number for the maximum document count."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"FOR c IN Characters\n    LIMIT 5\n    RETURN c.name\n")),(0,a.kt)("p",null,"The query returns the first five results, in random order."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'[\n  "Joffrey",\n  "Tommen",\n  "Tyrion",\n  "Roose",\n  "Tywin"\n]\n')),(0,a.kt)("p",null," You can also skip a certain amount of record and return the next ",(0,a.kt)("em",{parentName:"p"},"n")," results:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"FOR c IN Characters\n    LIMIT 2, 5\n    RETURN c.name\n")),(0,a.kt)("p",null,"The second query skips the first two names and returns the next five. Both results feature Tyrion, Roose, and Tywin."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'[\n  "Tyrion",\n  "Roose",\n  "Tywin",\n  "Samwell",\n  "Melisandre"\n]\n')),(0,a.kt)("h2",{id:"sort-by-name"},"Sort by Name"),(0,a.kt)("p",null,"The order in which matching records were returned by the queries shown until now was basically random. To return them in a defined order, you can add a ",(0,a.kt)("inlineCode",{parentName:"p"},"SORT()")," operation. It can have a big impact on the result if combined with a ",(0,a.kt)("inlineCode",{parentName:"p"},"LIMIT()"),", because the result becomes predictable if you sort first. For more information, refer to ",(0,a.kt)("a",{parentName:"p",href:"/docs/queryworkers/c8ql/operations/sort"},"SORT()")," operation documentation."),(0,a.kt)("p",null,"This example returns the first ten documents and sorts by name."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"FOR c IN Characters\n    SORT c.name\n    LIMIT 10\n    RETURN c.name\n")),(0,a.kt)("p",null,"Results are in alphabetical order."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'[\n  "Arya",\n  "Bran",\n  "Brienne",\n  "Bronn",\n  "Catelyn",\n  "Cersei",\n  "Daario",\n  "Daenerys",\n  "Davos",\n  "Ellaria"\n]\n')),(0,a.kt)("p",null,"You can reverse the sort order with ",(0,a.kt)("inlineCode",{parentName:"p"},"DESC"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"FOR c IN Characters\n    SORT c.name DESC\n    LIMIT 10\n    RETURN c.name\n")),(0,a.kt)("p",null,"The list of ten names is returned in descending order, which means you get the first ten starting at the end of the alphabet."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'[\n  "Ygritte",\n  "Viserys",\n  "Varys",\n  "Tywin",\n  "Tyrion",\n  "Tormund",\n  "Tommen",\n  "Theon",\n  "The High Sparrow",\n  "Talisa"\n]\n')),(0,a.kt)("p",null,"The first sort was ascending, which is the default order. Because it is the default, it is not required to explicitly ask for ",(0,a.kt)("inlineCode",{parentName:"p"},"ASC")," order."),(0,a.kt)("h2",{id:"sort-by-multiple-attributes"},"Sort by Multiple Attributes"),(0,a.kt)("p",null,"What if you want to sort by surname? Many of the characters share a surname. The result order among characters with the same surname is undefined. You can first sort by surname, then name to determine the order:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"FOR c IN Characters\n    FILTER c.surname\n    SORT c.surname, c.name\n    LIMIT 10\n    RETURN {\n        surname: c.surname,\n        name: c.name\n    }\n")),(0,a.kt)("p",null,"Overall, the documents are sorted by last name. If the ",(0,a.kt)("em",{parentName:"p"},"surname")," is the same for two characters, the ",(0,a.kt)("em",{parentName:"p"},"name")," values are compared and the result sorted. These results are shown in JSON format; they will look slightly different if you are in the Table view."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'[\n    { "surname": "Baelish", "name": "Petyr" },\n    { "surname": "Baratheon", "name": "Joffrey" },\n    { "surname": "Baratheon", "name": "Robert" },\n    { "surname": "Baratheon", "name": "Stannis" },\n    { "surname": "Baratheon", "name": "Tommen" },\n    { "surname": "Bolton", "name": "Ramsay" },\n    { "surname": "Bolton", "name": "Roose" },\n    { "surname": "Clegane", "name": "Sandor" },\n    { "surname": "Drogo", "name": "Khal" },\n    { "surname": "Giantsbane", "name": "Tormund" }\n]\n')),(0,a.kt)("p",null,"Note that a filter is applied before sorting, to only let documents through, that actually feature a surname value (many don't have it and would cause ",(0,a.kt)("inlineCode",{parentName:"p"},"null")," values in the result)."),(0,a.kt)("h2",{id:"sort-by-age"},"Sort by Age"),(0,a.kt)("p",null,"The order can also be determined by a numeric value, such as the age:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"FOR c IN Characters\n    FILTER c.age\n    SORT c.age\n    LIMIT 10\n    RETURN {\n        name: c.name,\n        age: c.age\n    }\n")),(0,a.kt)("p",null,"A filter is applied to avoid documents without age attribute. The remaining documents are sorted by age in ascending order, and the name and age of the ten youngest characters are returned."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'[\n    { "name": "Bran", "age": 10 },\n    { "name": "Arya", "age": 11 },\n    { "name": "Sansa", "age": 13 },\n    { "name": "Jon", "age": 16 },\n    { "name": "Theon", "age": 16 },\n    { "name": "Daenerys", "age": 16 },\n    { "name": "Samwell", "age": 17 },\n    { "name": "Joffrey", "age": 19 },\n    { "name": "Tyrion", "age": 32 },\n    { "name": "Brienne", "age": 32 }\n]\n')),(0,a.kt)("h2",{id:"next-steps"},"Next Steps"),(0,a.kt)("p",null,"Great job! You can now sort and limit your query results. When you're ready, continue the tutorial in ",(0,a.kt)("a",{parentName:"p",href:"/docs/queryworkers/c8ql/got-tutorial/import-and-merge"},"Part 4 - Import Traits and Merge"),"."))}c.isMDXComponent=!0}}]);