"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8516],{3905:function(e,t,n){n.d(t,{Zo:function(){return m},kt:function(){return d}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=r.createContext({}),p=function(e){var t=r.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},m=function(e){var t=p(e.components);return r.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),c=p(n),d=a,k=c["".concat(i,".").concat(d)]||c[d]||u[d]||o;return n?r.createElement(k,l(l({ref:t},m),{},{components:n})):r.createElement(k,l({ref:t},m))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=c;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:a,l[1]=s;for(var p=2;p<o;p++)l[p]=n[p];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},47494:function(e,t,n){n.r(t),n.d(t,{assets:function(){return m},contentTitle:function(){return i},default:function(){return d},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return u}});var r=n(87462),a=n(63366),o=(n(67294),n(3905)),l=["components"],s={sidebar_position:1},i="JSON",p={unversionedId:"cep/reference/extensions/mappers/json",id:"cep/reference/extensions/mappers/json",title:"JSON",description:"This extension converts JSON messages to/from stream processor events.",source:"@site/docs/cep/reference/extensions/mappers/json.md",sourceDirName:"cep/reference/extensions/mappers",slug:"/cep/reference/extensions/mappers/json",permalink:"/docs/cep/reference/extensions/mappers/json",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"S3",permalink:"/docs/cep/reference/extensions/io/s3"},next:{title:"CSV",permalink:"/docs/cep/reference/extensions/mappers/csv"}},m={},u=[{value:"Features",id:"features",level:2},{value:"json (Sink Mapper)",id:"json-sink-mapper",level:2},{value:"json (Source Mapper)",id:"json-source-mapper",level:3}],c={toc:u};function d(e){var t=e.components,n=(0,a.Z)(e,l);return(0,o.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"json"},"JSON"),(0,o.kt)("p",null,"This extension converts JSON messages to/from stream processor events."),(0,o.kt)("h2",{id:"features"},"Features"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"#json-sink-mapper"},"json (Sink Mapper)"))),(0,o.kt)("p",{parentName:"li"},"  This extension is an Event to JSON output mapper.\nTransports that publish messages can utilize this extension to\nconvert Stream events to JSON messages.\nYou can either send a pre-defined JSON format or a custom JSON\nmessage.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"#json-source-mapper"},"json (Source Mapper)"))),(0,o.kt)("p",{parentName:"li"},'  This extension is a JSON-to-Event input mapper. Transports that\naccept JSON messages can utilize this extension to convert an\nincoming JSON message into a Stream event. Users can either send a\npre-defined JSON format, where event conversion happens without any\nconfigurations, or use the JSON path to map from a custom JSON\nmessage.\nIn default mapping, the JSON string of the event can be enclosed by\nthe element "event", though optional.'))),(0,o.kt)("h2",{id:"json-sink-mapper"},"json (Sink Mapper)"),(0,o.kt)("p",null,"This extension is an Event to JSON output mapper. Transports that\npublish messages can utilize this extension to convert Stream events to\nJSON messages. You can either send a pre-defined JSON format or a custom\nJSON message."),(0,o.kt)("p",null,"Syntax"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'@sink(..., @map(type="json", validate.json="<BOOL>", enclosing.element="<STRING>")\n')),(0,o.kt)("p",null,"QUERY PARAMETERS"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Name"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"),(0,o.kt)("th",{parentName:"tr",align:null},"Default Value"),(0,o.kt)("th",{parentName:"tr",align:null},"Possible Data Types"),(0,o.kt)("th",{parentName:"tr",align:null},"Optional"),(0,o.kt)("th",{parentName:"tr",align:null},"Dynamic"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"validate.json"),(0,o.kt)("td",{parentName:"tr",align:null},"If this property is set to ",(0,o.kt)("inlineCode",{parentName:"td"},"true"),", it enables JSON validation for the JSON messages generated. When validation is carried out, messages that do not adhere to proper JSON standards are dropped. This property is set to ",(0,o.kt)("inlineCode",{parentName:"td"},"false")," by default."),(0,o.kt)("td",{parentName:"tr",align:null},"false"),(0,o.kt)("td",{parentName:"tr",align:null},"BOOL"),(0,o.kt)("td",{parentName:"tr",align:null},"Yes"),(0,o.kt)("td",{parentName:"tr",align:null},"No")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"enclosing.element"),(0,o.kt)("td",{parentName:"tr",align:null},"This specifies the enclosing element to be used if multiple events are sent in the same JSON message. Stream treats the child elements of the given enclosing element as events and executes JSON expressions on them. If an ",(0,o.kt)("inlineCode",{parentName:"td"},"enclosing.element")," is not provided, the multiple event scenario is disregarded and JSON path is evaluated based on the root element."),(0,o.kt)("td",{parentName:"tr",align:null},"\\$"),(0,o.kt)("td",{parentName:"tr",align:null},"STRING"),(0,o.kt)("td",{parentName:"tr",align:null},"Yes"),(0,o.kt)("td",{parentName:"tr",align:null},"No")))),(0,o.kt)("p",null,"EXAMPLE 1"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"@sink(type='inMemory', topic='stock', @map(type='json'))\ndefine stream FooStream (symbol string, price float, volume long);\n")),(0,o.kt)("p",null,"Above configuration does a default JSON input mapping that generates the\noutput given\nbelow."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'{\xa0\xa0\xa0\xa0\n"event":{\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n    "symbol":GDN,\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n    "price":55.6,\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n    "volume":100\xa0\xa0\xa0\xa0\n    }\n}\n')),(0,o.kt)("p",null,"EXAMPLE 2"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'@sink(type=\'inMemory\', topic=\'{{symbol}}\', @map(type=\'json\', enclosing.element=\'$.portfolio\', validate.json=\'true\', @payload( """{"StockData":{"Symbol":"{{symbol}}","Price":{{price}}}}""")))\ndefine stream BarStream (symbol string, price float, volume long);\n')),(0,o.kt)("p",null,"The above configuration performs a custom JSON mapping that generates\nthe following JSON message as the\noutput."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'{\n    "portfolio":{\xa0\xa0\xa0\xa0\n        "StockData":{\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n            "Symbol":GDN,\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n            "Price":55.6\xa0\xa0\xa0\xa0\xa0\xa0\n        }\n    }\n}\n')),(0,o.kt)("h3",{id:"json-source-mapper"},"json (Source Mapper)"),(0,o.kt)("p",null,'This extension is a JSON-to-Event input mapper. Transports that accept\nJSON messages can utilize this extension to convert an incoming JSON\nmessage into a Stream event. Users can either send a pre-defined JSON\nformat, where event conversion happens without any configurations, or\nuse the JSON path to map from a custom JSON message.In default mapping,\nthe JSON string of the event can be enclosed by the element "event",\nthough optional.'),(0,o.kt)("p",null,"Syntax"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'@source(..., @map(type="json", enclosing.element="<STRING>", fail.on.missing.attribute="<BOOL>")\n')),(0,o.kt)("p",null,"QUERY PARAMETERS"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Name"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"),(0,o.kt)("th",{parentName:"tr",align:null},"Default Value"),(0,o.kt)("th",{parentName:"tr",align:null},"Possible Data Types"),(0,o.kt)("th",{parentName:"tr",align:null},"Optional"),(0,o.kt)("th",{parentName:"tr",align:null},"Dynamic"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"enclosing.element"),(0,o.kt)("td",{parentName:"tr",align:null},"This is used to specify the enclosing element when sending multiple events in the same JSON message. Mapper treats the child elements of a given enclosing element as events and executes the JSON path expressions on these child elements. If the enclosing.element is not provided then the multiple-event scenario is disregarded and the JSON path is evaluated based on the root element."),(0,o.kt)("td",{parentName:"tr",align:null},"\\$"),(0,o.kt)("td",{parentName:"tr",align:null},"STRING"),(0,o.kt)("td",{parentName:"tr",align:null},"Yes"),(0,o.kt)("td",{parentName:"tr",align:null},"No")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"fail.on.missing.attribute"),(0,o.kt)("td",{parentName:"tr",align:null},"This parameter allows users to handle unknown attributes.The value of this can either be true or false. By default it is true. \xa0If a JSON execution fails or returns null, mapper drops that message. However, setting this property to false prompts mapper to send an event with a null value to Stream, where users can handle it as required, ie., assign a default value.)"),(0,o.kt)("td",{parentName:"tr",align:null},"true"),(0,o.kt)("td",{parentName:"tr",align:null},"BOOL"),(0,o.kt)("td",{parentName:"tr",align:null},"Yes"),(0,o.kt)("td",{parentName:"tr",align:null},"No")))),(0,o.kt)("p",null,"EXAMPLE 1"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"@source(type='inMemory', topic='stock', @map(type='json'))\ndefine stream FooStream (symbol string, price float, volume long);\n")),(0,o.kt)("p",null,"This configuration performs a default JSON input mapping.\xa0For a single\nevent, the input is required to be in one of the following\nformats:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'{\xa0\xa0\xa0\xa0\n    "event":{\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n        "symbol":"GDN",\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n        "price":55.6,\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n        "volume":100\xa0\xa0\xa0\xa0\n    }\n}\n')),(0,o.kt)("p",null,"or"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'{\xa0\xa0\xa0\xa0\n    "symbol":"GDN",\xa0\xa0\xa0\xa0\n    "price":55.6,\xa0\xa0\xa0\xa0\n    "volume":100\n}\n')),(0,o.kt)("p",null,"EXAMPLE 2"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"@source(type='inMemory', topic='stock', @map(type='json'))\ndefine stream FooStream (symbol string, price float, volume long);\n")),(0,o.kt)("p",null,"This configuration performs a default JSON input mapping. For multiple\nevents, the input is required to be in one of the following\nformats:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'[\n    {"event":\n        {"symbol":"GDN","price":55.6,"volume":100}\n    },\n    {"event":\n        {"symbol":"GDN","price":56.6,"volume":99}\n    },\n    {"event":\n        {"symbol":"GDN","price":57.6,"volume":80}\n    }\n]\n')),(0,o.kt)("p",null,"or"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'[\n    {"symbol":"GDN","price":55.6,"volume":100},\n    {"symbol":"GDN","price":56.6,"volume":99},\n    {"symbol":"GDN","price":57.6,"volume":80}\n]\n')),(0,o.kt)("p",null,"EXAMPLE 3"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'@source(type=\'inMemory\', topic=\'stock\', @map(type=\'json\', enclosing.element="$.portfolio", @attributes(symbol = "company.symbol", price = "price", volume = "volume")))\n')),(0,o.kt)("p",null,"This configuration performs a custom JSON mapping.For a single event,\nthe expected input is similar to the one shown\nbelow:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'{\xa0\n "portfolio":{\xa0\xa0\xa0\xa0\xa0\n        "stock":{\n            "volume":100,\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n            "company":{\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n                "symbol":"GDN"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n            },\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n            "price":55.6\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n        }\xa0\xa0\xa0\n    }\n}\n')),(0,o.kt)("p",null,"EXAMPLE 4"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'@source(type=\'inMemory\', topic=\'stock\', @map(type=\'json\', enclosing.element="$.portfolio", @attributes(symbol = "stock.company.symbol", price = "stock.price", volume = "stock.volume")))\ndefine stream FooStream (symbol string, price float, volume long);\n')),(0,o.kt)("p",null,"The configuration performs a custom JSON mapping.For multiple events,\nexpected input looks as follows.."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'{"portfolio":\xa0\xa0\xa0\n    [\n        {"stock":{\n            "volume":100,\n            "company":{\n                "symbol":"GDN"\n            },\n            "price":56.6\n            }\n        },\n        {"stock":{\n            "volume":200,\n            "company":{\n                "symbol":"GDN"\n            },\n            "price":57.6\n            }\n        }\n    ]\n}\n')))}d.isMDXComponent=!0}}]);